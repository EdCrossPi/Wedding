(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}})();let m=!0;function I(n){const e={x:document.getElementById("home-img-lg"),y1:document.getElementById("parallax1"),y2:document.getElementById("parallax2")},i={mobile:{x:{factor:-.5,offset:-2500},y1:{factor:.2,offset:3800},y2:{factor:-.05,offset:2e3}},desktop:{x:{factor:-.3,offset:-100},y1:{factor:.25,offset:3900},y2:{factor:-.2,offset:4800}}},t=n?i.mobile:i.desktop;let o=!1;const s=()=>{if(!m)return;const l=window.pageYOffset;if(e.x&&(e.x.style.backgroundPositionX=`${l*t.x.factor+t.x.offset}px`),e.y1){const r=(l-t.y1.offset)*t.y1.factor;e.y1.style.backgroundPosition=`center ${r}px`}e.y2&&(e.y2.style.backgroundPositionY=`${(l-t.y2.offset)*t.y2.factor}px`),o=!1},c=()=>{o||(requestAnimationFrame(()=>{s(),o=!1}),o=!0)};return window.addEventListener("scroll",c,{passive:!0}),s(),()=>{m=!1,setTimeout(()=>{m=!0},2e3)}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",x)})});function x(n){n.preventDefault();const e=n.currentTarget.getAttribute("href");if(!e||e==="#"){window.scrollTo({top:0,behavior:"smooth"}),history.pushState(null,null,"#");return}const i=document.querySelector(e);if(!i)return;const t=document.querySelector("nav"),o=t?t.offsetHeight:0,s=i.getBoundingClientRect().top+window.scrollY,c=window.innerWidth<=768,l=window.scrollY<10,u=c?{"#story":-100,"#local":-50,"#votos":-45}:{"#story":-180,"#local":-40,"#votos":-130};let a;l?e==="#story"?a=c?70:0:e==="#local"?a=c?100:110:e==="#votos"?a=c?95:100:a=0:a=u[e]??30;const w=s-o-a;window.scrollTo({top:w,behavior:"smooth"}),history.pushState(null,null,e),console.log("Scrolling to:",e),console.log("Offset aplicado:",a)}document.addEventListener("DOMContentLoaded",function(){const n=document.querySelectorAll(".nav ul li a"),e=document.getElementById("check"),i=document.querySelector(".logo");n.forEach(t=>{t.addEventListener("click",()=>{e.checked=!1})}),i&&i.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"}),e.checked=!1})});function L(){const n=document.querySelectorAll(".reveal");for(let e=0;e<n.length;e++){const i=window.innerHeight;n[e].getBoundingClientRect().top<i-150?n[e].classList.add("active"):n[e].classList.remove("active")}}window.addEventListener("scroll",L);function v(){const n=window.innerWidth<=768;I(n)}v();window.addEventListener("resize",v);function B(n){function e(){const i=new Date().getTime(),t=n-i;if(t<=0){document.getElementById("days").textContent="00",document.getElementById("hours").textContent="00",document.getElementById("minutes").textContent="00",document.getElementById("seconds").textContent="00";return}const o=Math.floor(t/(1e3*60*60*24)),s=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),c=Math.floor(t%(1e3*60*60)/(1e3*60)),l=Math.floor(t%(1e3*60)/1e3);document.getElementById("days").textContent=o.toString().padStart(2,"0"),document.getElementById("hours").textContent=s.toString().padStart(2,"0"),document.getElementById("minutes").textContent=c.toString().padStart(2,"0"),document.getElementById("seconds").textContent=l.toString().padStart(2,"0")}setInterval(e,1e3),e()}const b=new Date("2025-06-21T00:00:00").getTime();B(b);document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".ticker-content").forEach(e=>{e.dataset.duplicated||(Array.from(e.children).map(t=>t.cloneNode(!0)).forEach(t=>e.appendChild(t)),e.dataset.duplicated="true"),e.addEventListener("mouseenter",()=>{e.style.animationPlayState="paused"}),e.addEventListener("mouseleave",()=>{e.style.animationPlayState="running"})})});const E=window.location.hostname==="localhost"?"http://127.0.0.1:5500":"https://backend-rsvp-production.up.railway.app";let y="",p="";window.searchGuest=async function(){const n=document.getElementById("searchInput").value.trim();if(!n){console.log("Campo de busca vazio, abortando.");return}try{const i=await(await fetch(`${E}/buscar?nome=${encodeURIComponent(n)}`)).json(),t=document.getElementById("searchResult");Array.isArray(i)&&i.length>0?S(i):t.innerHTML='<p style="color: #ef4444;">Nenhum convite encontrado.</p>'}catch(e){console.error("Erro na busca:",e),document.getElementById("searchResult").innerHTML='<p style="color: #ef4444;">Erro ao buscar convite.</p>'}};const f=document.getElementById("guestList");f.children.length===0?f.classList.add("is-empty"):f.classList.remove("is-empty");const C=document.getElementById("verifyModal");document.getElementById("codigoInput");document.getElementById("verificationMessage");var g;(g=document.getElementById("searchButton"))==null||g.addEventListener("click",searchGuest);var h;(h=document.getElementById("searchInput"))==null||h.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),searchGuest())});function S(n){const e=document.getElementById("searchResult");if(e.innerHTML="",n.length===0){e.innerHTML='<p style="color: #ef4444;">Nenhum convite encontrado.</p>';return}n.forEach(i=>{const t=document.createElement("div");t.classList.add("guest-list-js");const o=n.length,s=document.getElementById("searchResult");s&&(window.innerWidth<=768?o===1?s.style.height="55px":o===2?s.style.height="118px":o>=3?s.style.height="179px":s.style.height="":o===1?s.style.height="80px":o===2?s.style.height="165px":o>=3?s.style.height="255px":s.style.height="");const c=document.createElement("div"),l=document.createElement("p");l.classList.add("invite-card__name"),l.textContent=i.nome;const r=document.createElement("p");r.classList.add("invite-card__phone"),r.innerHTML=`<span style="text-transform: uppercase;">Convite: ${i.convite.nome}</span>`,c.appendChild(l),c.appendChild(r);const d=document.createElement("div");d.classList.add("invite-card__action"),d.textContent="Selecionar",d.addEventListener("click",()=>{var u;y=((u=i.convite)==null?void 0:u.nome)||i.nome||"",p=i.nome||"",document.getElementById("modalSubTitle").textContent=p,document.getElementById("modalTitle").textContent=y,T(),document.getElementById("codigoInput").value="",document.getElementById("verificationMessage").textContent="",document.getElementById("guestList").innerHTML="",document.getElementById("verifyModal").style.display="flex",document.getElementById("searchResult").innerHTML=""}),t.appendChild(c),t.appendChild(d),s.appendChild(t)})}function T(){const n=document.getElementById("modalTitle"),e=document.getElementById("modalSubTitle");if(n&&e){const i=n.textContent.trim(),t=e.textContent.trim();i===t?e.style.display="none":e.style.display="block"}}window.verifyGuest=async function(){var s,c;const n=document.getElementById("codigoInput"),e=document.getElementById("nomeInput"),i=n.value.trim(),t=e.value.trim(),o=y||((c=(s=document.getElementById("modalTitle"))==null?void 0:s.textContent)==null?void 0:c.trim());if(console.log({convite:o,codigo:i,nomeCompleto:t}),!o||!i||!t){alert("Preencha todos os campos.");return}try{const l=await fetch(`${E}/verificar`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({convite:o,codigo:i,nomeCompleto:t})}),r=await l.json();if(!l.ok)throw new Error(r.error||"Erro na verificação.");document.getElementById("verificationMessage").textContent=r.message}catch(l){alert(l.message||"Erro ao verificar presença."),console.error(l)}};window.closeModal=function(){C.style.display="none"};
