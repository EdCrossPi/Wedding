(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(n){if(n.ep)return;n.ep=!0;const c=s(n);fetch(n.href,c)}})();let d=!0;function w(o){const e={x:document.getElementById("home-img-lg"),y1:document.getElementById("parallax1"),y2:document.getElementById("parallax2")},s={mobile:{x:{factor:-.5,offset:-2500},y1:{factor:.2,offset:3800},y2:{factor:-.05,offset:2e3}},desktop:{x:{factor:-.3,offset:-100},y1:{factor:.25,offset:3900},y2:{factor:-.2,offset:4800}}},t=o?s.mobile:s.desktop;let n=!1;const c=()=>{if(!d)return;const r=window.pageYOffset;if(e.x&&(e.x.style.backgroundPositionX=`${r*t.x.factor+t.x.offset}px`),e.y1){const a=(r-t.y1.offset)*t.y1.factor;e.y1.style.backgroundPosition=`center ${a}px`}e.y2&&(e.y2.style.backgroundPositionY=`${(r-t.y2.offset)*t.y2.factor}px`),n=!1},i=()=>{n||(requestAnimationFrame(()=>{c(),n=!1}),n=!0)};return window.addEventListener("scroll",i,{passive:!0}),c(),()=>{d=!1,setTimeout(()=>{d=!0},2e3)}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('a[href^="#"]').forEach(o=>{o.addEventListener("click",I)})});function I(o){o.preventDefault();const e=o.currentTarget.getAttribute("href");if(!e||e==="#"){window.scrollTo({top:0,behavior:"smooth"}),history.pushState(null,null,"#");return}const s=document.querySelector(e);if(!s)return;const t=document.querySelector("nav"),n=t?t.offsetHeight:0,c=s.getBoundingClientRect().top+window.scrollY,i=window.innerWidth<=768,r=window.scrollY<10,v=i?{"#story":-100,"#local":-50,"#votos":-45}:{"#story":-180,"#local":-40,"#votos":-130};let l;r?e==="#story"?l=i?70:0:e==="#local"?l=i?100:110:e==="#votos"?l=i?95:100:l=0:l=v[e]??30;const E=c-n-l;window.scrollTo({top:E,behavior:"smooth"}),history.pushState(null,null,e),console.log("Scrolling to:",e),console.log("Offset aplicado:",l)}document.addEventListener("DOMContentLoaded",function(){const o=document.querySelectorAll(".nav ul li a"),e=document.getElementById("check"),s=document.querySelector(".logo");o.forEach(t=>{t.addEventListener("click",()=>{e.checked=!1})}),s&&s.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"}),e.checked=!1})});function L(){const o=document.querySelectorAll(".reveal");for(let e=0;e<o.length;e++){const s=window.innerHeight;o[e].getBoundingClientRect().top<s-150?o[e].classList.add("active"):o[e].classList.remove("active")}}window.addEventListener("scroll",L);function g(){const o=window.innerWidth<=768;w(o)}g();window.addEventListener("resize",g);function B(o){function e(){const s=new Date().getTime(),t=o-s;if(t<=0){document.getElementById("days").textContent="00",document.getElementById("hours").textContent="00",document.getElementById("minutes").textContent="00",document.getElementById("seconds").textContent="00";return}const n=Math.floor(t/(1e3*60*60*24)),c=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),i=Math.floor(t%(1e3*60*60)/(1e3*60)),r=Math.floor(t%(1e3*60)/1e3);document.getElementById("days").textContent=n.toString().padStart(2,"0"),document.getElementById("hours").textContent=c.toString().padStart(2,"0"),document.getElementById("minutes").textContent=i.toString().padStart(2,"0"),document.getElementById("seconds").textContent=r.toString().padStart(2,"0")}setInterval(e,1e3),e()}const x=new Date("2025-06-21T00:00:00").getTime();B(x);document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".ticker-content").forEach(e=>{e.dataset.duplicated||(Array.from(e.children).map(t=>t.cloneNode(!0)).forEach(t=>e.appendChild(t)),e.dataset.duplicated="true"),e.addEventListener("mouseenter",()=>{e.style.animationPlayState="paused"}),e.addEventListener("mouseleave",()=>{e.style.animationPlayState="running"})})});const h=window.location.hostname==="localhost"?"http://localhost:3000":"https://backend-rsvp-production.up.railway.app";let m="",f="";window.searchGuest=async function(){const o=document.getElementById("searchInput").value.trim();if(!o){console.log("Campo de busca vazio, abortando.");return}try{const s=await(await fetch(`${h}/buscar?nome=${encodeURIComponent(o)}`)).json(),t=document.getElementById("searchResult");Array.isArray(s)&&s.length>0?S(s):t.innerHTML='<p style="color: #ef4444;">Nenhum convite encontrado.</p>'}catch(e){console.error("Erro na busca:",e),document.getElementById("searchResult").innerHTML='<p style="color: #ef4444;">Erro ao buscar convite.</p>'}};const u=document.getElementById("guestList");u.children.length===0?u.classList.add("is-empty"):u.classList.remove("is-empty");const C=document.getElementById("verifyModal"),b=document.getElementById("codigoInput");document.getElementById("verificationMessage");var y;(y=document.getElementById("searchButton"))==null||y.addEventListener("click",searchGuest);var p;(p=document.getElementById("searchInput"))==null||p.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),searchGuest())});function S(o){const e=document.getElementById("searchResult");if(e.innerHTML="",o.length===0){e.innerHTML='<p style="color: #ef4444;">Nenhum convite encontrado.</p>';return}o.forEach(s=>{const t=document.createElement("div");t.classList.add("guest-list-js");const n=document.createElement("div"),c=document.createElement("p");c.classList.add("invite-card__name"),c.textContent=s.nome;const i=document.createElement("p");i.classList.add("invite-card__phone"),i.innerHTML=`<span style="text-transform: uppercase;">Convite: ${s.convite.nome}</span>`,n.appendChild(c),n.appendChild(i);const r=document.createElement("div");r.classList.add("invite-card__action"),r.textContent="Selecionar",r.addEventListener("click",()=>{var a;m=((a=s.convite)==null?void 0:a.nome)||s.nome||"",f=s.nome||"",document.getElementById("modalSubTitle").textContent=f,document.getElementById("modalTitle").textContent=m,T(),document.getElementById("codigoInput").value="",document.getElementById("verificationMessage").textContent="",document.getElementById("guestList").innerHTML="",document.getElementById("verifyModal").style.display="flex",document.getElementById("searchResult").innerHTML=""}),t.appendChild(n),t.appendChild(r),e.appendChild(t)})}function T(){const o=document.getElementById("modalTitle"),e=document.getElementById("modalSubTitle");if(o&&e){const s=o.textContent.trim(),t=e.textContent.trim();s===t?e.style.display="none":e.style.display="block"}}window.verifyGuest=async function(){const o=b.value.trim(),e=nomeInput.value.trim(),s=m;if(!s||!o||!e){alert("Preencha todos os campos.");return}try{const t=await fetch(`${h}/verificar`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({convite:s,codigo:o,nomeCompleto:e})}),n=await t.json();if(!t.ok)throw new Error(n.error||"Erro na verificação.");document.getElementById("verificationMessage").textContent=n.message,setTimeout(()=>{document.getElementById("verifyModal").style.display="none"},5e3)}catch(t){alert(t.message||"Erro ao verificar presença."),console.error(t)}};window.closeModal=function(){C.style.display="none"};
