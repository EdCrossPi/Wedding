(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();let f=!0;function B(t){const e={x:document.getElementById("home-img-lg"),y1:document.getElementById("parallax1"),y2:document.getElementById("parallax2")},o={mobile:{x:{factor:-.5,offset:-2500},y1:{factor:.2,offset:3800},y2:{factor:-.05,offset:2e3}},desktop:{x:{factor:-.3,offset:-100},y1:{factor:.25,offset:3900},y2:{factor:-.2,offset:4800}}},n=t?o.mobile:o.desktop;let s=!1;const i=()=>{if(!f)return;const r=window.pageYOffset;if(e.x&&(e.x.style.backgroundPositionX=`${r*n.x.factor+n.x.offset}px`),e.y1){const a=(r-n.y1.offset)*n.y1.factor;e.y1.style.backgroundPosition=`center ${a}px`}e.y2&&(e.y2.style.backgroundPositionY=`${(r-n.y2.offset)*n.y2.factor}px`),s=!1},c=()=>{s||(requestAnimationFrame(()=>{i(),s=!1}),s=!0)};return window.addEventListener("scroll",c,{passive:!0}),i(),()=>{f=!1,setTimeout(()=>{f=!0},2e3)}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",C)})});function C(t){t.preventDefault();const e=t.currentTarget.getAttribute("href");if(!e||e==="#"){window.scrollTo({top:0,behavior:"smooth"}),history.pushState(null,null,"#");return}const o=document.querySelector(e);if(!o)return;const n=document.querySelector("nav"),s=n?n.offsetHeight:0,i=o.getBoundingClientRect().top+window.scrollY,c=window.innerWidth<=768,r=window.scrollY<10,m=c?{"#story":-100,"#local":-50,"#votos":-45}:{"#story":-180,"#local":-40,"#votos":-130};let d;r?e==="#story"?d=c?70:0:e==="#local"?d=c?100:110:e==="#votos"?d=c?95:100:d=0:d=m[e]??30;const w=i-s-d;window.scrollTo({top:w,behavior:"smooth"}),history.pushState(null,null,e),console.log("Scrolling to:",e),console.log("Offset aplicado:",d)}document.addEventListener("DOMContentLoaded",function(){const t=document.querySelectorAll(".nav ul li a"),e=document.getElementById("check"),o=document.querySelector(".logo");t.forEach(n=>{n.addEventListener("click",()=>{e.checked=!1})}),o&&o.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"}),e.checked=!1})});function b(){const t=document.querySelectorAll(".reveal");for(let e=0;e<t.length;e++){const o=window.innerHeight;t[e].getBoundingClientRect().top<o-150?t[e].classList.add("active"):t[e].classList.remove("active")}}window.addEventListener("scroll",b);function E(){const t=window.innerWidth<=768;B(t)}E();window.addEventListener("resize",E);function x(t){function e(){const o=new Date().getTime(),n=t-o;if(n<=0){document.getElementById("days").textContent="00",document.getElementById("hours").textContent="00",document.getElementById("minutes").textContent="00",document.getElementById("seconds").textContent="00";return}const s=Math.floor(n/(1e3*60*60*24)),i=Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),c=Math.floor(n%(1e3*60*60)/(1e3*60)),r=Math.floor(n%(1e3*60)/1e3);document.getElementById("days").textContent=s.toString().padStart(2,"0"),document.getElementById("hours").textContent=i.toString().padStart(2,"0"),document.getElementById("minutes").textContent=c.toString().padStart(2,"0"),document.getElementById("seconds").textContent=r.toString().padStart(2,"0")}setInterval(e,1e3),e()}const S=new Date("2025-06-21T00:00:00").getTime();x(S);document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".ticker-content").forEach(e=>{e.dataset.duplicated||(Array.from(e.children).map(n=>n.cloneNode(!0)).forEach(n=>e.appendChild(n)),e.dataset.duplicated="true"),e.addEventListener("mouseenter",()=>{e.style.animationPlayState="paused"}),e.addEventListener("mouseleave",()=>{e.style.animationPlayState="running"})})});const I=window.location.hostname==="localhost"?"http://127.0.0.1:5500":"https://backend-rsvp-production.up.railway.app";let y="",g="";window.searchGuest=async function(){const t=document.getElementById("searchInput").value.trim();if(!t){console.log("Campo de busca vazio, abortando.");return}try{const o=await(await fetch(`${I}/buscar?nome=${encodeURIComponent(t)}`)).json(),n=document.getElementById("searchResult");Array.isArray(o)&&o.length>0?M(o):n.innerHTML='<p style="color: #ef4444;">Nenhum convite encontrado.</p>'}catch(e){console.error("Erro na busca:",e),document.getElementById("searchResult").innerHTML='<p style="color: #ef4444;">Erro ao buscar convite.</p>'}};const p=document.getElementById("guestList");p.children.length===0?p.classList.add("is-empty"):p.classList.remove("is-empty");const T=document.getElementById("verifyModal");document.getElementById("codigoInput");document.getElementById("verificationMessage");var h;(h=document.getElementById("searchButton"))==null||h.addEventListener("click",searchGuest);var v;(v=document.getElementById("searchInput"))==null||v.addEventListener("keydown",t=>{t.key==="Enter"&&(t.preventDefault(),searchGuest())});function M(t){const e=document.getElementById("searchResult");if(e.innerHTML="",t.length===0){e.innerHTML='<p style="color: #ef4444;">Nenhum convite encontrado.</p>';return}t.forEach(o=>{const n=document.createElement("div");n.classList.add("guest-list-js");const s=document.createElement("div"),i=document.createElement("p");i.classList.add("invite-card__name"),i.textContent=o.nome;const c=document.createElement("p");c.classList.add("invite-card__phone"),c.innerHTML=`<span style="text-transform: uppercase;">Convite: ${o.convite.nome}</span>`,s.appendChild(i),s.appendChild(c);const r=document.createElement("div");r.classList.add("invite-card__action"),r.textContent="Selecionar",r.addEventListener("click",()=>{var a;y=((a=o.convite)==null?void 0:a.nome)||o.nome||"",g=o.nome||"",document.getElementById("modalSubTitle").textContent=g,document.getElementById("modalTitle").textContent=y,P(),document.getElementById("codigoInput").value="",document.getElementById("verificationMessage").textContent="",document.getElementById("guestList").innerHTML="",document.getElementById("verifyModal").style.display="flex",document.getElementById("searchResult").innerHTML=""}),n.appendChild(s),n.appendChild(r),e.appendChild(n)})}function P(){const t=document.getElementById("modalTitle"),e=document.getElementById("modalSubTitle");if(t&&e){const o=t.textContent.trim(),n=e.textContent.trim();o===n?e.style.display="none":e.style.display="block"}}function L(t){if(t=t.replace(/[^\d]+/g,""),t.length!==11||/^(\d)\1{10}$/.test(t))return!1;let e=0;for(let n=0;n<9;n++)e+=parseInt(t.charAt(n))*(10-n);let o=e*10%11;if((o===10||o===11)&&(o=0),o!==parseInt(t.charAt(9)))return!1;e=0;for(let n=0;n<10;n++)e+=parseInt(t.charAt(n))*(11-n);return o=e*10%11,(o===10||o===11)&&(o=0),o===parseInt(t.charAt(10))}const l=document.getElementById("cpfInput");l&&(l.setAttribute("placeholder","Informe seu CPF"),l.addEventListener("input",function(){let t=l.value.replace(/\D/g,"");t.length>11&&(t=t.slice(0,11)),t=t.replace(/(\d{3})(\d)/,"$1.$2"),t=t.replace(/(\d{3})(\d)/,"$1.$2"),t=t.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),l.value=t}),l.addEventListener("keypress",function(t){/\d/.test(t.key)||t.preventDefault()}),l.addEventListener("blur",function(){L(l.value)?l.classList.remove("erro-cpf"):(alert("CPF inválido"),l.classList.add("erro-cpf"))}));document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("cpfInput");t&&(t.setAttribute("placeholder","___.___.___-__"),t.addEventListener("input",function(){let e=t.value.replace(/\D/g,"");e.length>11&&(e=e.slice(0,11)),e=e.replace(/(\d{3})(\d)/,"$1.$2"),e=e.replace(/(\d{3})(\d)/,"$1.$2"),e=e.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),t.value=e}),t.addEventListener("blur",function(){L(t.value)?t.classList.remove("erro-cpf"):(alert("CPF inválido"),t.classList.add("erro-cpf"))}))});window.verifyGuest=async function(){var r,a;const t=document.getElementById("codigoInput"),e=document.getElementById("nomeInput"),o=document.getElementById("cpfInput"),n=t.value.trim(),s=e.value.trim(),i=o.value.trim(),c=y||((a=(r=document.getElementById("modalTitle"))==null?void 0:r.textContent)==null?void 0:a.trim());if(console.log({convite:c,codigo:n,nomeCompleto:s,cpf:i}),!c||!n||!s||!i){alert("Preencha todos os campos.");return}try{const u=await fetch(`${I}/verificar`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({convite:c,codigo:n,nomeCompleto:s,cpf:i})}),m=await u.json();if(!u.ok)throw new Error(m.error||"Erro na verificação.");document.getElementById("verificationMessage").textContent=m.message,setTimeout(()=>{document.getElementById("verifyModal").style.display="none"},2e4)}catch(u){alert(u.message||"Erro ao verificar presença."),console.error(u)}};window.closeModal=function(){T.style.display="none"};
