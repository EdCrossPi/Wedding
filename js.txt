const parallax = document.getElementById("home-img-lg");
const parallax1 = document.getElementById("parallax1");
const parallax2 = document.getElementById("parallax2");

function updateParallax() {
  let screenWidth = window.innerWidth;
  let scrollY = window.scrollY || window.pageYOffset;

    // Pegar a posição do elemento na tela
    let parallaxRect = parallax.getBoundingClientRect();
    let parallax1Rect = parallax1.getBoundingClientRect();
    let parallax2Rect = parallax2.getBoundingClientRect();

    if (screenWidth > 768) { // Desktop
        parallax.style.backgroundPositionX = scrollY * (-0.3) + "px";
        parallax1.style.backgroundPositionY = (scrollY - 4500) * 0.1 + "px";
        parallax2.style.backgroundPositionY = (scrollY - 4800) * (-0.1) + "px";
    } else { // Mobile - Ajuste completo
        let parallaxY = (parallaxRect.top - window.innerHeight / 2) * 0.2;
        let parallax1Y = (parallax1Rect.top - window.innerHeight / 2) * 0.25;
        let parallax2Y = (parallax2Rect.top - window.innerHeight / 2) * -0.15;

        // Garante que a posição inicial seja 0px no carregamento
        if (scrollY === 0) {
            parallax.style.backgroundPositionY = "0px";
            parallax1.style.backgroundPositionY = "0px";
            parallax2.style.backgroundPositionY = "0px";
        } else {
            parallax.style.transform = `translateY(${parallaxY}px)`;
            parallax1.style.transform = `translateY(${parallax1Y}px)`;
            parallax2.style.transform = `translateY(${parallax2Y}px)`;
        }
    }
}

// Ajuste para remover delay no touchmove
function handleTouchMove(event) {
    requestAnimationFrame(updateParallax);
}

// Aplica a função no evento de scroll e touchmove
window.addEventListener("scroll", updateParallax);
window.addEventListener("touchmove", handleTouchMove, { passive: true });

  
function reveal() {
var reveals = document.querySelectorAll(".reveal");
  
for (var i = 0; i < reveals.length; i++) {
      var windowHeight = window.innerHeight;
      var elementTop = reveals[i].getBoundingClientRect().top;
      var elementVisible = 50;
  
      if (elementTop < windowHeight - elementVisible) {
        reveals[i].classList.add("active");
      } else {
        reveals[i].classList.remove("active");
      }
    }
}
  
window.addEventListener("scroll", reveal);